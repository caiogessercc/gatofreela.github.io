---
import LayoutHome from "../../layouts/LayoutHome.astro";
import { mockUserDev } from "../../mock/user";

// ✅ Certifique-se de que `mockUserClient` é um array
const users = Array.isArray(mockUserDev) ? mockUserDev : [mockUserDev];

// Função para gerar as rotas dinâmicas corretamente
export async function getStaticPaths() {
  return users.map((developer) => ({
    params: { username: developer.username },
  }));
}

// Obtendo o username da URL
const { username } = Astro.params;

// Encontrando o cliente correto
const developer = users.find((developer) => developer.username === username);

// Tratamento para casos em que o cliente não é encontrado
if (!developer) {
  throw new Error(`Cliente com username '${username}' não foi encontrado.`);
}
---

<LayoutHome name={developer.name} role={developer.role}>
  <article class="module">
    <header class="about">
      <h1>Bem-vindo à página inicial do Cliente, {developer.name}!</h1>
      <p>
        Gerencie seus projetos e contrate os melhores desenvolvedores na Gato
        Freela.
      </p>
    </header>
  </article>
</LayoutHome>
